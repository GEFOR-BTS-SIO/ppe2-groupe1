(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[656],{6968:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/test2",function(){return n(1872)}])},1872:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var s=n(5893),a=n(7536),o=n(7294),l=n(6154);let r=e=>{let{onUserSelected:t}=e,[n,a]=(0,o.useState)([]);(0,o.useEffect)(()=>{let e=async()=>{let e=await l.Z.get("http://localhost:8000/api/users",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),t=JSON.parse(e.data);a(t)};e()},[]);let r=e=>{let s=e.target.value,a=n.find(e=>e.id===s);a&&t(a)};return(0,s.jsxs)("select",{onChange:r,children:[(0,s.jsx)("option",{children:"Select user"}),n.map(e=>(0,s.jsx)("option",{value:e.id,children:e.email},e.id))]})};function i(){let{register:e,handleSubmit:t,watch:n}=(0,a.cI)(),[i,c]=(0,o.useState)(),[u,d]=(0,o.useState)(""),[p,h]=(0,o.useState)([]),g=e=>{c(e)};console.log(i);let _=async e=>{try{let t=await l.Z.post("http://localhost:8000/api/message",{message_send:e.message_send,id_user:null==i?void 0:i.id},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}});d(t.data.message),console.log(u),h([...p,t.data.message])}catch(e){console.error(e)}};return(0,s.jsxs)(s.Fragment,{children:[p.map((e,t)=>(0,s.jsx)("p",{children:e},t)),(0,s.jsxs)("form",{onSubmit:t(_),children:[(0,s.jsx)(r,{onUserSelected:g}),(0,s.jsxs)("label",{children:["Message de test :",(0,s.jsx)("input",{...e("message_send")})]}),(0,s.jsx)("button",{type:"submit",children:"Envoyer"})]})]})}}},function(e){e.O(0,[356,774,888,179],function(){return e(e.s=6968)}),_N_E=e.O()}]);